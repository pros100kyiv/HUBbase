# üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

## üìä –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –ø–æ –±—ñ–∑–Ω–µ—Å–∞—Ö

–í—Å—ñ –¥–∞–Ω—ñ –≤ —Å–∏—Å—Ç–µ–º—ñ **–ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–æ–∑–¥—ñ–ª–µ–Ω—ñ –ø–æ –±—ñ–∑–Ω–µ—Å–∞—Ö** —á–µ—Ä–µ–∑ –ø–æ–ª–µ `businessId`. –ö–æ–∂–µ–Ω –±—ñ–∑–Ω–µ—Å –º–∞—î —Å–≤–æ—é —ñ–∑–æ–ª—å–æ–≤–∞–Ω—É –æ–±–ª–∞—Å—Ç—å –¥–∞–Ω–∏—Ö.

## üèóÔ∏è –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö

### Business (–ë—ñ–∑–Ω–µ—Å)
**–û—Å–Ω–æ–≤–Ω–∞ –º–æ–¥–µ–ª—å, –¥–æ —è–∫–æ—ó –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –≤—Å—ñ —ñ–Ω—à—ñ –¥–∞–Ω—ñ**

```prisma
model Business {
  id          String        @id @default(cuid())
  name        String
  slug        String        @unique
  email       String        @unique
  password    String?       // —Ö–µ—à–æ–≤–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å
  googleId    String?       @unique
  phone       String?
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
  
  masters     Master[]      // –ú–∞–π—Å—Ç—Ä–∏ —Ü—å–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É
  services    Service[]     // –ü–æ—Å–ª—É–≥–∏ —Ü—å–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É
  appointments Appointment[] // –ó–∞–ø–∏—Å–∏ —Ü—å–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É
}
```

**–Ü–Ω–¥–µ–∫—Å–∏:**
- `slug` - –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É –ø–æ URL
- `email` - –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- `googleId` - –¥–ª—è OAuth

### Master (–ú–∞–π—Å—Ç–µ—Ä)
**–ü—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É**

```prisma
model Master {
  id          String        @id @default(cuid())
  businessId  String        // ‚ö†Ô∏è –û–ë–û–í'–Ø–ó–ö–û–í–ï - —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –±—ñ–∑–Ω–µ—Å—É
  business    Business      @relation(...)
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
  
  appointments Appointment[] // –ó–∞–ø–∏—Å–∏ —Ü—å–æ–≥–æ –º–∞–π—Å—Ç—Ä–∞
}
```

**–Ü–Ω–¥–µ–∫—Å–∏:**
- `businessId` - –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –ø–æ –±—ñ–∑–Ω–µ—Å—É

**–ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è:** –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –±—ñ–∑–Ω–µ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –≤—Å—ñ –º–∞–π—Å—Ç—Ä–∏.

### Service (–ü–æ—Å–ª—É–≥–∞)
**–ü—Ä–∏–≤'—è–∑–∞–Ω–∞ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É**

```prisma
model Service {
  id          String        @id @default(cuid())
  businessId  String        // ‚ö†Ô∏è –û–ë–û–í'–Ø–ó–ö–û–í–ï - —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –±—ñ–∑–Ω–µ—Å—É
  business    Business      @relation(...)
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
}
```

**–Ü–Ω–¥–µ–∫—Å–∏:**
- `businessId` - –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –ø–æ –±—ñ–∑–Ω–µ—Å—É

**–ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è:** –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –±—ñ–∑–Ω–µ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –≤—Å—ñ –ø–æ—Å–ª—É–≥–∏.

### Appointment (–ó–∞–ø–∏—Å)
**–ü—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É —Ç–∞ –º–∞–π—Å—Ç—Ä–∞**

```prisma
model Appointment {
  id          String   @id @default(cuid())
  businessId  String   // ‚ö†Ô∏è –û–ë–û–í'–Ø–ó–ö–û–í–ï - —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –±—ñ–∑–Ω–µ—Å—É
  business    Business @relation(...)
  masterId    String   // ‚ö†Ô∏è –û–ë–û–í'–Ø–ó–ö–û–í–ï - —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –º–∞–π—Å—Ç—Ä–∞
  master      Master   @relation(...)
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
}
```

**–Ü–Ω–¥–µ–∫—Å–∏:**
- `businessId` - –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –ø–æ –±—ñ–∑–Ω–µ—Å—É
- `masterId` - –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –ø–æ –º–∞–π—Å—Ç—Ä—É
- `startTime` - –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –ø–æ –¥–∞—Ç—ñ
- `clientPhone` - –¥–ª—è –ø–æ—à—É–∫—É –∫–ª—ñ—î–Ω—Ç—ñ–≤

**–ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è:** 
- –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –±—ñ–∑–Ω–µ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –≤—Å—ñ –∑–∞–ø–∏—Å–∏
- –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –º–∞–π—Å—Ç—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –≤—Å—ñ –π–æ–≥–æ –∑–∞–ø–∏—Å–∏

## üîí –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ —ñ–∑–æ–ª—è—Ü—ñ—è –¥–∞–Ω–∏—Ö

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ businessId –≤ API

**–í—Å—ñ API –∑–∞–ø–∏—Ç–∏ –û–ë–û–í'–Ø–ó–ö–û–í–û –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å `businessId`:**

```typescript
// –ü—Ä–∏–∫–ª–∞–¥ –∑ app/api/appointments/route.ts
if (!businessId) {
  return NextResponse.json({ error: 'businessId is required' }, { status: 400 })
}

const where: any = { businessId } // –§—ñ–ª—å—Ç—Ä –ø–æ –±—ñ–∑–Ω–µ—Å—É
```

### –ü—Ä–∏–∫–ª–∞–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤:

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```typescript
// –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞–ø–∏—Å–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É
GET /api/appointments?businessId=business-1

// –û—Ç—Ä–∏–º–∞—Ç–∏ –º–∞–π—Å—Ç—Ä—ñ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É
GET /api/masters?businessId=business-1

// –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Å–ª—É–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É
GET /api/services?businessId=business-1
```

‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–±—É–¥–µ –ø–æ–º–∏–ª–∫–∞):**
```typescript
// –ë–µ–∑ businessId - –ø–æ–≤–µ—Ä–Ω–µ –ø–æ–º–∏–ª–∫—É 400
GET /api/appointments
```

## üë• –ö–ª—ñ—î–Ω—Ç–∏

–ö–ª—ñ—î–Ω—Ç–∏ **–Ω–µ –º–∞—é—Ç—å –æ–∫—Ä–µ–º–æ—ó –º–æ–¥–µ–ª—ñ**, –∞ –∑–±–∏—Ä–∞—é—Ç—å—Å—è –∑ `Appointment` –ø–æ –ø–æ–ª—é `clientPhone`:

```typescript
// –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
const clientsMap = new Map<string, Client>()

appointments.forEach((apt) => {
  const existing = clientsMap.get(apt.clientPhone) || {
    phone: apt.clientPhone,
    name: apt.clientName,
    appointments: []
  }
  existing.appointments.push(apt)
})
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- –Ü—Å—Ç–æ—Ä—ñ—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Å—ñ–≤ –∫–ª—ñ—î–Ω—Ç–∞
- –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –æ–∫—Ä–µ–º–∞ —Ç–∞–±–ª–∏—Ü—è

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
- –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –∑–º—ñ–Ω–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω, –≤—ñ–Ω –±—É–¥–µ –≤–≤–∞–∂–∞—Ç–∏—Å—è –Ω–æ–≤–∏–º –∫–ª—ñ—î–Ω—Ç–æ–º

## üìÅ –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤

### –õ–æ–≥—ñ–Ω–∏ —Ç–∞ –ø–∞—Ä–æ–ª—ñ
–ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ø–∞–ø—Ü—ñ `business-credentials/`:
- `README.md` - —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
- `[slug]-credentials.md` - —Ñ–∞–π–ª –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** –§–∞–π–ª–∏ –∑ –ø–∞—Ä–æ–ª—è–º–∏ –ù–ï –∫–æ–º—ñ—Ç—è—Ç—å—Å—è –≤ Git (–¥–æ–¥–∞–Ω–æ –≤ `.gitignore`)

### –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö
–°–∫—Ä–∏–ø—Ç–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏:
- `scripts/list-businesses.ts` - —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –±—ñ–∑–Ω–µ—Å—ñ–≤
- `scripts/export-business-data.ts` - –µ–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –±—ñ–∑–Ω–µ—Å—É

## üîç –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ–∑–æ–ª—è—Ü—ñ—é –¥–∞–Ω–∏—Ö

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ API
```bash
# –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞–ø–∏—Å–∏ –±—ñ–∑–Ω–µ—Å—É 1
curl "http://localhost:3000/api/appointments?businessId=business-1"

# –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞–ø–∏—Å–∏ –±—ñ–∑–Ω–µ—Å—É 2
curl "http://localhost:3000/api/appointments?businessId=business-2"
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
```bash
# –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –±—ñ–∑–Ω–µ—Å—ñ–≤
npx tsx scripts/list-businesses.ts

# –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É
npx tsx scripts/export-business-data.ts business-1
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
```sql
-- –í—Å—ñ –∑–∞–ø–∏—Å–∏ –±—ñ–∑–Ω–µ—Å—É
SELECT * FROM "Appointment" WHERE "businessId" = 'business-1';

-- –í—Å—ñ –º–∞–π—Å—Ç—Ä–∏ –±—ñ–∑–Ω–µ—Å—É
SELECT * FROM "Master" WHERE "businessId" = 'business-1';

-- –í—Å—ñ –ø–æ—Å–ª—É–≥–∏ –±—ñ–∑–Ω–µ—Å—É
SELECT * FROM "Service" WHERE "businessId" = 'business-1';
```

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

‚úÖ **–í—Å—ñ –¥–∞–Ω—ñ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–æ–∑–¥—ñ–ª–µ–Ω—ñ –ø–æ –±—ñ–∑–Ω–µ—Å–∞—Ö**
‚úÖ **–ö–æ–∂–µ–Ω –±—ñ–∑–Ω–µ—Å –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –¥–∞–Ω—ñ**
‚úÖ **API –ø–µ—Ä–µ–≤—ñ—Ä—è—î businessId –≤ —É—Å—ñ—Ö –∑–∞–ø–∏—Ç–∞—Ö**
‚úÖ **–ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–±–µ–∑–ø–µ—á—É—î —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö**
‚úÖ **–Ü–Ω–¥–µ–∫—Å–∏ –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å —à–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫**

–°–∏—Å—Ç–µ–º–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–Ω—É —ñ–∑–æ–ª—è—Ü—ñ—é –¥–∞–Ω–∏—Ö –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –±—ñ–∑–Ω–µ—Å–∞–º–∏! üéØ

